@page "/signup"

@using Client.Components.Common
@using Client.Services.Authentication

@inject AuthStoreService AuthStoreService
@inject NavigationManager NavigationManager

@if (AuthStoreService.IsLoggedIn)
{
    NavigationManager.NavigateTo(Redirect ?? "", false, true);
    return;
}

<Title Value="Sign Up" HideHeader="true" />

<MudContainer Class="my-8 py-8" MaxWidth="MaxWidth.ExtraSmall">
    <MudText Typo="Typo.h4" GutterBottom="true" class="mb-5">ユーザー登録</MudText>

    <EditForm Model="@RegisterModel" OnValidSubmit="SubmitAsync">
        <DataAnnotationsValidator />

        <MudTextField Class="my-2" FullWidth="true" Label="ユーザー名" @bind-Value="@RegisterModel.UserName"
            For="@(() => RegisterModel.UserName)" />
        <MudTextField Class="my-2" FullWidth="true" Label="Email" @bind-Value="@RegisterModel.Email"
            For="@(() => RegisterModel.Email)" />
        <MudTextField Class="my-2" FullWidth="true" Label="パスワード" @bind-Value="@RegisterModel.Password"
            For="@(() => RegisterModel.Password)" InputType="InputType.Password" />

        <MudButton Class="mt-7" Variant="Variant.Filled" StartIcon="@Icons.Filled.Login"
            Color="Color.Primary" FullWidth="true" ButtonType="ButtonType.Submit"
            Disabled="@_isLoading">
            ログイン
            <ButtonLoadingOverlay Visible="@_isLoading" />
        </MudButton>
    </EditForm>
</MudContainer>