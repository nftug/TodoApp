@page "/fetchtodo"
@attribute [Authorize]
@inherits MyComponentBase

@using Client.Models
@using Client.Components
@using Application.Todos.Models

<PageTitle>Todo List</PageTitle>

<h1>Todo List</h1>

<TodoForm @ref=@TodoForm @bind-Command=@TodoCommand
    OnValidSubmit=@OnValidSubmit OnDelete=@((id) => Delete(id)) />

@if (IsLoading || TodoItems == null)
{
    <p><em>Loading...</em></p>
    return;
}

<p>@(TodoItems.TotalItems) 個の項目が見つかりました。</p>

<TodoItemList Items=@TodoItems.Results OnClickEdit=@(item => ResultToCommand(item))
    OnClickChangeState=@(args => ChangeState(args.Item1, args.Item2)) />

<PaginationLink Items="@TodoItems" />