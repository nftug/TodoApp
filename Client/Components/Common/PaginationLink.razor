@inject NavigationManager Navigation
@typeparam T

@using Client.Shared.Models

@if (Items == null) return;

<MudPagination Count="@Items.TotalPages" Selected="@_page"
    SelectedChanged="@OnChangePage" @attributes="@Attributes" />

@code {
    [Parameter]
    public Pagination<T>? Items { get; set; } = null!;

    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? Attributes { get; set; }

    private int _page = 1;

    protected override void OnInitialized()
    {
        _page = Items?.CurrentPage ?? 1;
    }

    private void OnChangePage(int value)
    {
        _page = value;
        var uri = Navigation.GetUriWithQueryParameter("page", value);
        Navigation.NavigateTo(uri);
    }
}