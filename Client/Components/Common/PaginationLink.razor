@inject NavigationManager Navigation
@typeparam T

@using Client.Shared.Models

@if (Items == null) return;

<MudPagination Count="Items.TotalPages" Selected="Page"
    SelectedChanged="OnChangePage" @attributes="@Attributes" />

@code {
    [Parameter]
    public Pagination<T>? Items { get; set; } = null!;

    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? Attributes { get; set; }

    private int Page { get; set; }

    protected override void OnInitialized()
    {
        Page = Items?.CurrentPage ?? 1;
    }

    private void OnChangePage(int value)
    {
        Page = value;
        var uri = Navigation.GetUriWithQueryParameter("page", value);
        Navigation.NavigateTo(uri);
    }
}