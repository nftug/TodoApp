@using Client.Services

@inject LayoutService LayoutService
@inject NavigationService NavigationService

<MudAppBar Elevation="0" Fixed>
    <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@DrawerToggleCallback" />

    <MudHidden Breakpoint="Breakpoint.LgAndUp">
        <MudText Typo="Typo.h6" Class="ml-3">@NavigationService.Title</MudText>
    </MudHidden>
    <MudHidden Breakpoint="Breakpoint.MdAndDown">
        <MudText Typo="Typo.h6" Class="ml-3">TodoApp</MudText>
    </MudHidden>

    <MudSpacer />

    <MudTooltip Duration="1000" Text="@(LayoutService.IsDarkMode ? "ライトモードに切り替える" : "ダークモードに切り替える")">
        <MudIconButton
            Icon="@(LayoutService.IsDarkMode ? @Icons.Rounded.LightMode : @Icons.Material.Outlined.DarkMode)"
            Color="Color.Inherit" OnClick="@LayoutService.ToggleDarkMode" />
    </MudTooltip>

    <UserMenu />
</MudAppBar>

@code {
    [Parameter]
    public EventCallback<MouseEventArgs> DrawerToggleCallback { get; set; }

    protected override void OnInitialized()
    {
        NavigationService.TitleChanged += StateHasChanged;
    }
}